# üåê DB Homework  
### *–°–∏—Å—Ç–µ–º—ã —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö ‚Äî –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ ‚Ññ1*

<p align="left">
  <img src="https://img.shields.io/badge/PostgreSQL-4169E1?style=for-the-badge&logo=postgresql&logoColor=white"/>
  <img src="https://img.shields.io/badge/DBeaver-372923?style=for-the-badge&logo=dbeaver&logoColor=white"/>
  <img src="https://img.shields.io/badge/Excel-217346?style=for-the-badge&logo=microsoft-excel&logoColor=white"/>
  <img src="https://img.shields.io/badge/ERD-000000?style=for-the-badge&logo=diagramsdotnet&logoColor=white"/>
</p>

---

## üßæ –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç—Ä—ë—Ö –∏—Å—Ö–æ–¥–Ω—ã—Ö CSV-—Ñ–∞–π–ª–æ–≤:

- `DB_customer.csv`
- `DB_transaction.csv`
- `DB_product.csv`

–¶–µ–ª—å —Ä–∞–±–æ—Ç—ã:

- –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ PostgreSQL,
- –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ **–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å** —Å—Ö–µ–º—É –¥–æ —É—Ä–æ–≤–Ω—è **3NF**,
- –æ—Ñ–æ—Ä–º–∏—Ç—å –∏—Ç–æ–≥–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤ –≤–∏–¥–µ **ER-–¥–∏–∞–≥—Ä–∞–º–º—ã** –∏ SQL-—Å–∫—Ä–∏–ø—Ç–æ–≤.

> üí° –û—Å–Ω–æ–≤–Ω–æ–π –∞–∫—Ü–µ–Ω—Ç ‚Äî –∏–º–µ–Ω–Ω–æ –Ω–∞ **–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏** (–ø–µ—Ä–µ—Ö–æ–¥ –æ—Ç ¬´–ø–ª–æ—Å–∫–∏—Ö¬ª —Ç–∞–±–ª–∏—Ü –∫ —Å–≤—è–∑–Ω–æ–π, –ª–æ–≥–∏—á–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ).

---

## üß± –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –¥–æ 3NF ‚Äî —á—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –ò—Å—Ö–æ–¥–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã (staging-—Å–ª–æ–π)

–î–∞–Ω–Ω—ã–µ –∏–∑ CSV –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:

- `stg_customers`
- `stg_products`
- `stg_transactions`

–ù–∞ —ç—Ç–æ–º —É—Ä–æ–≤–Ω–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–≤—Ç–æ—Ä—è—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏—Å—Ö–æ–¥–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–∞–∫ ¬´—Å—ã—Ä—å—ë¬ª –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏.

---

### 2. Customer-–¥–æ–º–µ–Ω

**–ò–∑ –∏—Å—Ö–æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã `stg_customers` –≤—ã–¥–µ–ª–µ–Ω—ã —Å—É—â–Ω–æ—Å—Ç–∏:**

- `customers` ‚Äî –æ—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ –∫–ª–∏–µ–Ω—Ç–µ  
- `customer_address` ‚Äî –∞–¥—Ä–µ—Å –∏ –æ—Ü–µ–Ω–∫–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ + —Ñ–ª–∞–≥–∏ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ (`valid_from`, `valid_to`, `is_current`)

**–í—ã–Ω–µ—Å–µ–Ω—ã lookup-—Ç–∞–±–ª–∏—Ü—ã:**

- `genders` ‚Äî —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–æ–ª–æ–≤  
- `wealth_segments` ‚Äî —Ç–∏–ø—ã –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö —Å–µ–≥–º–µ–Ω—Ç–æ–≤  
- `job_industry_categories` ‚Äî –æ—Ç—Ä–∞—Å–ª–∏ –∑–∞–Ω—è—Ç–æ—Å—Ç–∏  
- `order_statuses` ‚Äî —Å—Ç–∞—Ç—É—Å—ã –∑–∞–∫–∞–∑–æ–≤ (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ö)

–¢–µ–º —Å–∞–º—ã–º:

- —É—Å—Ç—Ä–∞–Ω—è—é—Ç—Å—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è,
- —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è —Ä–∏—Å–∫ –æ–ø–µ—á–∞—Ç–æ–∫,
- –æ–±–ª–µ–≥—á–∞–µ—Ç—Å—è –∏–∑–º–µ–Ω–µ–Ω–∏–µ –±–∏–∑–Ω–µ—Å-—Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤.

---

### 3. Product-–¥–æ–º–µ–Ω

–ò–∑ `stg_products` –ø–æ—Å—Ç—Ä–æ–µ–Ω—ã:

- `products` ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–≤–∞—Ä–µ  
- `product_price` ‚Äî —Ü–µ–Ω–∞ –∏ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å (—Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –ø–æ–¥ –∏—Å—Ç–æ—Ä–∏—é —Ü–µ–Ω)  

**Lookup-—Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–∞:**

- `brands` ‚Äî –±—Ä–µ–Ω–¥—ã  
- `product_lines` ‚Äî –ª–∏–Ω–µ–π–∫–∏  
- `product_classes` ‚Äî –∫–ª–∞—Å—Å—ã  
- `product_sizes` ‚Äî —Ä–∞–∑–º–µ—Ä—ã  

–ö–∞–∂–¥–∞—è —Å–ø—Ä–∞–≤–æ—á–Ω–∞—è —Å—É—â–Ω–æ—Å—Ç—å –∏–º–µ–µ—Ç —Å–≤–æ–π ID –∏ —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è, —á—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º 2NF/3NF.

---

### 4. Transactions-–¥–æ–º–µ–Ω

–¢–∞–±–ª–∏—Ü–∞:

- `transactions` ‚Äî —Ñ–∞–∫—Ç –ø–æ–∫—É–ø–∫–∏ (–∫–ª–∏–µ–Ω—Ç √ó –ø—Ä–æ–¥—É–∫—Ç √ó –¥–∞—Ç–∞)

–°–≤—è–∑–∏:

- `customer_id` ‚Üí `customers.customer_id`  
- `product_id` ‚Üí `products.product_id`  
- `order_status_id` ‚Üí `order_statuses.order_status_id`  

–í—Å–µ —Å–≤—è–∑–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω—ã —á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏, —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö.

---

## üß¨ –ò—Ç–æ–≥–æ–≤–∞—è ER-–º–æ–¥–µ–ª—å (3NF)

–ù–∏–∂–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ —Ñ–∏–Ω–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (production-—Å–ª–æ–π). Staging-—Ç–∞–±–ª–∏—Ü—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–π.

### üì∑ ER-–¥–∏–∞–≥—Ä–∞–º–º–∞ (DBeaver)

![ER Diagram](data/img/dbeaver_diagram.png)

### üñºÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ö–µ–º—ã –≤ DBeaver

![Schema Structure](data/img/dbeaver_structure.jpg)

### üîÑ –ù–µ–±–æ–ª—å—à–∞—è –∞–Ω–∏–º–∞—Ü–∏—è

<p align="left">
  <img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExaGZlOGNkdzJqaGhid3UxNXBiNmprM3UwbG5jMzNreW94dWpsNjNzMyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/3oriO0OEd9QIDdllqo/giphy.gif" width="260" alt="database-animation"/>
</p>

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```text
DB_homework/
‚îÇ
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ DB_customer.csv
‚îÇ   ‚îú‚îÄ‚îÄ DB_product.csv
‚îÇ   ‚îú‚îÄ‚îÄ DB_transaction.csv
‚îÇ   ‚îî‚îÄ‚îÄ img/
‚îÇ       ‚îú‚îÄ‚îÄ dbeaver_diagram.png
‚îÇ       ‚îî‚îÄ‚îÄ dbeaver_structure.jpg
‚îÇ
‚îú‚îÄ‚îÄ sql/
‚îÇ   ‚îú‚îÄ‚îÄ 01_create_tables_and_lookups.sql
‚îÇ   ‚îî‚îÄ‚îÄ 02_load_data.sql
‚îÇ
‚îî‚îÄ‚îÄ README.md
